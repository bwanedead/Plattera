/*
üî¥ CRITICAL RESULTS COMPONENT STYLING DOCUMENTATION üî¥
======================================================

THIS FILE CONTROLS CRITICAL POSITIONING AND STYLING FOR REDUNDANCY FEATURES

CRITICAL POSITIONING SYSTEM (DO NOT MODIFY):
===========================================

1. DRAFT SELECTOR POSITIONING (CRITICAL - HEATMAP REFERENCE POINT):
   - .draft-selector-collapsed: position: absolute; top: 60px; right: 40px; z-index: 10;
   - .draft-selector-expanded: position: absolute; top: 60px; right: 40px; z-index: 10;
   - Size: 28x28px bubble (width: 28px; height: 28px;)
   
   ‚ö†Ô∏è  THESE VALUES ARE POSITIONING ANCHORS FOR HEATMAP FEATURE:
   - top: 60px = Below navigation (nav height ~50px + margin)
   - right: 40px = Clear of scrollbar (16px) + safe margin (24px)
   - z-index: 10 = Above content, below popups

2. HEATMAP TOGGLE POSITIONING REQUIREMENTS:
   - MUST use right: 80px (40px offset from DraftSelector)
   - MUST use same top: 60px for alignment
   - MUST use z-index: 10 for same layer
   - MUST use same 28x28px size for consistency

3. Z-INDEX HIERARCHY (CRITICAL - DO NOT DISRUPT):
   - Content: z-index: 1
   - Controls (DraftSelector, HeatmapToggle): z-index: 10
   - Popups (Confidence popup, dropdowns): z-index: 1000+

SAFE ADDITIONS FOR HEATMAP FEATURE:
==================================

‚úÖ SAFE TO ADD:
- .heatmap-toggle-collapsed, .heatmap-toggle-expanded classes
- .confidence-heatmap-viewer, .confidence-word, .confidence-popup classes
- Additional color variables for confidence visualization
- Hover states and transitions for word highlighting
- Popup positioning and styling

‚ùå DO NOT MODIFY:
- Existing .draft-selector-* positioning values
- Existing z-index values
- Existing size constraints (28x28px)
- Color variables used by existing components

HEATMAP STYLING REQUIREMENTS:
============================

1. CONFIDENCE COLOR SCHEME:
   ```css
   High Confidence (80-100%): rgba(34, 197, 94, 0.1-0.3)   // Green
   Medium Confidence (50-79%): rgba(234, 179, 8, 0.2-0.5)  // Yellow  
   Low Confidence (0-49%): rgba(239, 68, 68, 0.3-0.7)      // Red
   ```

2. WORD INTERACTION STATES:
   - Default: Subtle background highlighting
   - Hover: Slightly darker background + cursor: pointer
   - Editing: Input field styling to match theme
   - Contested: Clear visual indication of clickability

3. POPUP STYLING:
   - Background: var(--bg-secondary) with border
   - High z-index: 1000+ (above all other elements)
   - Proper shadow and border-radius for consistency
   - Responsive positioning to avoid viewport edges

CRITICAL DEPENDENCIES:
=====================

1. CSS VARIABLES (MUST REMAIN FUNCTIONAL):
   - var(--accent-primary) - Used for active states
   - var(--bg-secondary), var(--bg-tertiary) - Used for backgrounds
   - var(--border-color) - Used for borders and dividers
   - var(--text-primary), var(--text-secondary) - Used for text colors

2. COMPONENT COORDINATION:
   - AnimatedBorder component expects consistent sizing
   - Results viewer expects proper text display area
   - Navigation expects clear z-index hierarchy

3. RESPONSIVE BEHAVIOR:
   - Must work in both light and dark themes
   - Must handle viewport size changes
   - Must maintain readability at all zoom levels

INTEGRATION TESTING CHECKPOINTS:
===============================

BEFORE adding heatmap styles:
1. ‚úÖ Verify DraftSelector positioning is correct
2. ‚úÖ Verify no layout conflicts with existing elements
3. ‚úÖ Verify color variables work in both themes
4. ‚úÖ Verify z-index hierarchy is maintained

AFTER adding heatmap styles:
1. ‚úÖ DraftSelector positioning unchanged
2. ‚úÖ HeatmapToggle positioned correctly (right: 80px)
3. ‚úÖ No visual conflicts between components
4. ‚úÖ Confidence colors are readable and accessible
5. ‚úÖ Popups appear above all other content
6. ‚úÖ Hover states work smoothly
7. ‚úÖ Text editing interface is usable

FAILURE PREVENTION:
==================

Common mistakes that would break layout:
- Changing existing positioning values (breaks component coordination)
- Modifying z-index hierarchy (breaks layering)
- Changing size constraints (breaks visual consistency)
- Overriding color variables (breaks theme compatibility)

If this CSS breaks, heatmap feature will lose:
- Proper positioning coordination with DraftSelector
- Consistent visual styling with existing components
- Proper layering of interactive elements
- Theme compatibility
*/

/* Results and History Components */

/* Draft Selector - Compact Collapsible Design with Animated Border */

/* CRITICAL COLLAPSED STATE POSITIONING - HEATMAP REFERENCE POINT */
.draft-selector-collapsed {
  position: absolute;
  top: 60px;          /* ‚Üê CRITICAL: Navigation clearance + margin */
  right: 40px;        /* ‚Üê CRITICAL: Scrollbar clearance (16px) + safe margin (24px) */
  z-index: 10;        /* ‚Üê CRITICAL: Above content, below popups */
}

/* ALIGNMENT BUTTON POSITIONING - TO THE LEFT OF DRAFT SELECTOR */
.alignment-button-container {
  position: absolute;
  top: 60px;          /* ‚Üê CRITICAL: Same as DraftSelector for alignment */
  right: 80px;        /* ‚Üê CRITICAL: 40px offset from DraftSelector (left of it) */
  z-index: 10;        /* ‚Üê CRITICAL: Same layer as DraftSelector */
}

/* CRITICAL BUBBLE SIZING - HEATMAP TOGGLE MUST MATCH */
.draft-selector-bubble,
.alignment-button-bubble {
  background: var(--accent-primary);
  color: white;
  border: none;
  border-radius: 6px;
  width: 28px;        /* ‚Üê CRITICAL: Standard control size - heatmap toggle must match */
  height: 28px;       /* ‚Üê CRITICAL: Standard control size - heatmap toggle must match */
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.8rem;
  font-weight: 600;
  transition: all 0.3s ease;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
}

.draft-selector-bubble:hover,
.alignment-button-bubble:hover:not(.disabled) {
  background: rgba(var(--accent-primary-rgb), 0.3);
  color: var(--accent-primary);
  transform: scale(1.05);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

.draft-selector-bubble:active,
.alignment-button-bubble:active:not(.disabled) {
  transform: scale(0.95);
}

/* Alignment Button States */
.alignment-button-bubble.aligning {
  background: rgba(var(--accent-primary-rgb), 0.7);
  animation: pulse 2s infinite;
}

.alignment-button-bubble.disabled {
  background: var(--bg-tertiary);
  color: var(--text-secondary);
  cursor: not-allowed;
  opacity: 0.6;
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}

/* CRITICAL EXPANDED STATE POSITIONING - HEATMAP COORDINATION POINT */
.draft-selector-expanded {
  position: absolute;
  top: 60px;          /* ‚Üê CRITICAL: Must align with collapsed state */
  right: 40px;        /* ‚Üê CRITICAL: Must align with collapsed state */
  z-index: 10;        /* ‚Üê CRITICAL: Same layer as collapsed state */
  min-width: 200px;
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.draft-selector-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 12px;
  border-bottom: 1px solid var(--border-color);
  background: var(--bg-tertiary);
  border-radius: 6px 6px 0 0;
}

.draft-header-left {
  display: flex;
  align-items: center;
  gap: 6px;
}

.draft-label {
  font-size: 0.8rem;
  font-weight: 600;
  color: var(--text-secondary);
}

/* CRITICAL COLOR USAGE - Heatmap toggle must use same accent color */
.draft-count-badge {
  background: var(--accent-primary);  /* ‚Üê CRITICAL: Heatmap toggle must match this color */
  color: white;
  font-size: 0.7rem;
  font-weight: 600;
  padding: 1px 5px;
  border-radius: 8px;
  position: relative;
}

.consensus-indicator {
  position: absolute;
  top: -2px;
  right: -2px;
  background: #22c55e;
  color: white;
  border-radius: 50%;
  width: 12px;
  height: 12px;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 8px;
  font-weight: bold;
}

.draft-close-btn {
  background: none;
  border: none;
  color: var(--text-secondary);
  font-size: 1.2rem;
  cursor: pointer;
  padding: 0;
  width: 20px;
  height: 20px;
  display: flex;
  align-items: center;
  justify-content: center;
  border-radius: 3px;
  transition: background-color 0.2s ease;
}

.draft-close-btn:hover {
  background: rgba(255, 255, 255, 0.1);
  color: var(--text-primary);
}

.draft-current-selection {
  padding: 4px;
}

.draft-current-btn {
  width: 100%;
  background: none;
  border: none;
  padding: 8px 12px;
  cursor: pointer;
  display: flex;
  justify-content: space-between;
  align-items: center;
  border-radius: 4px;
  transition: background-color 0.2s ease;
}

.draft-current-btn:hover {
  background: var(--bg-tertiary);
}

.current-draft-name {
  font-size: 0.85rem;
  font-weight: 600;
  color: var(--text-primary);
}

.dropdown-arrow {
  font-size: 0.7rem;
  color: var(--text-secondary);
  transition: transform 0.2s ease;
}

.dropdown-arrow.open {
  transform: rotate(180deg);
}

/* CRITICAL DROPDOWN Z-INDEX - Must be below heatmap popups */
.draft-dropdown {
  border-top: 1px solid var(--border-color);
  background: var(--bg-primary);
  border-radius: 0 0 6px 6px;
  max-height: 200px;
  overflow-y: auto;
  /* z-index inherited from parent (10) - heatmap popups must use 1000+ */
}

.draft-item {
  padding: 8px 12px;
  cursor: pointer;
  display: flex;
  justify-content: space-between;
  align-items: center;
  transition: background-color 0.2s ease;
}

.draft-item:hover {
  background: var(--bg-tertiary);
}

/* CRITICAL ACTIVE STATE STYLING - Heatmap must coordinate with this */
.draft-item.active {
  background: rgba(var(--accent-primary-rgb), 0.1);  /* ‚Üê CRITICAL: Heatmap active states should match */
  border-left: 3px solid var(--accent-primary);      /* ‚Üê CRITICAL: Heatmap may use similar indicators */
}

.draft-name {
  font-size: 0.8rem;
  font-weight: 600;
  color: var(--text-primary);
  display: flex;
  align-items: center;
  gap: 4px;
}

.draft-desc {
  font-size: 0.7rem;
  color: var(--text-secondary);
}

/* CRITICAL INDICATOR STYLING - Heatmap may use similar patterns */
.recommended,
.best-indicator {
  color: #ffd700;     /* ‚Üê CRITICAL: Gold color for quality indicators */
  font-size: 0.8rem;
}

.draft-divider {
  height: 1px;
  background: var(--border-color);
  margin: 4px 0;
}

/* ALIGNMENT PANEL STYLING */
.alignment-panel {
  background: var(--bg-secondary);
  border-left: 1px solid var(--border-color);
  display: flex;
  flex-direction: column;
  height: 100%;
  overflow: hidden;
}

.alignment-panel-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 16px;
  border-bottom: 1px solid var(--border-color);
  background: var(--bg-tertiary);
}

.alignment-panel-header h3 {
  margin: 0;
  font-size: 1rem;
  font-weight: 600;
  color: var(--text-primary);
}

.panel-close-btn {
  background: none;
  border: none;
  color: var(--text-secondary);
  font-size: 1.2rem;
  cursor: pointer;
  padding: 4px;
  border-radius: 3px;
  transition: background-color 0.2s ease;
}

.panel-close-btn:hover {
  background: rgba(255, 255, 255, 0.1);
  color: var(--text-primary);
}

.alignment-panel-content {
  flex: 1;
  padding: 16px;
  overflow-y: auto;
}

.alignment-stats {
  margin-bottom: 20px;
}

.stat-item {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 0;
  border-bottom: 1px solid rgba(var(--border-color-rgb), 0.3);
}

.stat-item:last-child {
  border-bottom: none;
}

.stat-label {
  font-size: 0.85rem;
  color: var(--text-secondary);
}

.stat-value {
  font-size: 0.9rem;
  font-weight: 600;
  color: var(--text-primary);
}

.stat-value.high-quality {
  color: #22c55e;
}

.stat-value.medium-quality {
  color: #eab308;
}

.stat-value.low-quality {
  color: #ef4444;
}

.confidence-breakdown {
  margin-bottom: 20px;
}

.confidence-breakdown h4 {
  margin: 0 0 12px 0;
  font-size: 0.9rem;
  color: var(--text-primary);
}

.confidence-bars {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.confidence-bar {
  display: flex;
  align-items: center;
  gap: 8px;
  font-size: 0.75rem;
}

.confidence-label {
  min-width: 80px;
  color: var(--text-secondary);
}

.confidence-bar-track {
  flex: 1;
  height: 6px;
  background: var(--bg-tertiary);
  border-radius: 3px;
  overflow: hidden;
}

.confidence-bar-fill {
  height: 100%;
  border-radius: 3px;
  transition: width 0.3s ease;
}

.confidence-bar-fill.high-confidence {
  background: #22c55e;
}

.confidence-bar-fill.medium-confidence {
  background: #eab308;
}

.confidence-bar-fill.low-confidence {
  background: #ef4444;
}

.confidence-count {
  min-width: 30px;
  text-align: right;
  color: var(--text-secondary);
}

.heatmap-controls {
  margin-bottom: 20px;
}

.heatmap-controls h4 {
  margin: 0 0 12px 0;
  font-size: 0.9rem;
  color: var(--text-primary);
}

.heatmap-toggle {
  display: flex;
  align-items: center;
  gap: 8px;
  cursor: pointer;
}

.heatmap-toggle input[type="checkbox"] {
  display: none;
}

.toggle-slider {
  width: 40px;
  height: 20px;
  background: var(--bg-tertiary);
  border-radius: 10px;
  position: relative;
  transition: background-color 0.2s ease;
}

.toggle-slider::before {
  content: '';
  position: absolute;
  width: 16px;
  height: 16px;
  background: white;
  border-radius: 50%;
  top: 2px;
  left: 2px;
  transition: transform 0.2s ease;
}

.heatmap-toggle input[type="checkbox"]:checked + .toggle-slider {
  background: var(--accent-primary);
}

.heatmap-toggle input[type="checkbox"]:checked + .toggle-slider::before {
  transform: translateX(20px);
}

.toggle-label {
  font-size: 0.85rem;
  color: var(--text-primary);
}

.heatmap-hint {
  margin: 8px 0 0 0;
  font-size: 0.75rem;
  color: var(--text-secondary);
}

.processing-info {
  margin-top: auto;
  padding-top: 16px;
  border-top: 1px solid var(--border-color);
}

.processing-time {
  font-size: 0.75rem;
  color: var(--text-secondary);
}

.alignment-error {
  text-align: center;
  color: var(--text-secondary);
}

.alignment-error .error-message {
  margin-top: 8px;
  font-size: 0.8rem;
  color: #ef4444;
}

/* CONFIDENCE HEATMAP VIEWER STYLING */
.confidence-heatmap-viewer {
  display: flex;
  flex-direction: column;
  height: 100%;
  font-family: var(--font-mono);
}

.heatmap-info-bar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 12px;
  background: var(--bg-tertiary);
  border-bottom: 1px solid var(--border-color);
  font-size: 0.75rem;
}

.heatmap-legend {
  display: flex;
  gap: 16px;
}

.legend-item {
  display: flex;
  align-items: center;
  gap: 4px;
  color: var(--text-secondary);
}

.legend-color {
  width: 12px;
  height: 12px;
  border-radius: 2px;
}

.legend-color.high-confidence {
  background: rgba(34, 197, 94, 0.3);
}

.legend-color.medium-confidence {
  background: rgba(234, 179, 8, 0.4);
}

.legend-color.low-confidence {
  background: rgba(239, 68, 68, 0.5);
}

.heatmap-draft-info {
  color: var(--text-secondary);
  font-weight: 500;
}

.heatmap-text-container {
  flex: 1;
  padding: 16px;
  overflow-y: auto;
}

.confidence-text {
  line-height: 1.6;
  font-size: 0.9rem;
}

.confidence-word {
  display: inline;
  padding: 1px 2px;
  border-radius: 2px;
  transition: all 0.2s ease;
}

.confidence-word.high-confidence {
  background-color: rgba(34, 197, 94, 0.2);
}

.confidence-word.medium-confidence {
  background-color: rgba(234, 179, 8, 0.3);
}

.confidence-word.low-confidence {
  background-color: rgba(239, 68, 68, 0.4);
}

.confidence-word.clickable {
  cursor: pointer;
  border: 1px solid transparent;
}

.confidence-word.clickable:hover {
  background-color: rgba(var(--accent-primary-rgb), 0.2);
  border-color: var(--accent-primary);
}

.heatmap-unavailable {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  height: 100%;
  color: var(--text-secondary);
  text-align: center;
}

.heatmap-unavailable p {
  margin: 4px 0;
}

/* CONFIDENCE POPUP STYLING */
.confidence-popup {
  position: fixed;
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
  z-index: 1000;
  min-width: 200px;
  max-width: 300px;
}

.popup-content {
  padding: 12px;
  position: relative;
}

.popup-close {
  position: absolute;
  top: 8px;
  right: 8px;
  background: none;
  border: none;
  color: var(--text-secondary);
  font-size: 1.1rem;
  cursor: pointer;
  padding: 2px;
  border-radius: 2px;
  transition: background-color 0.2s ease;
}

.popup-close:hover {
  background: rgba(255, 255, 255, 0.1);
  color: var(--text-primary);
}

.popup-word-info {
  margin-bottom: 12px;
}

.popup-word {
  font-size: 1rem;
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 4px;
}

.popup-confidence {
  font-size: 0.85rem;
  color: var(--text-secondary);
}

.popup-alternatives {
  border-top: 1px solid var(--border-color);
  padding-top: 12px;
}

.popup-alternatives h5 {
  margin: 0 0 8px 0;
  font-size: 0.8rem;
  color: var(--text-secondary);
}

.alternative-option {
  padding: 4px 8px;
  background: var(--bg-tertiary);
  border-radius: 3px;
  margin-bottom: 4px;
  font-size: 0.85rem;
  color: var(--text-primary);
}

.alternative-option:last-child {
  margin-bottom: 0;
}

.popup-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 999;
}

/* Clean up old styles - remove everything else related to draft selector */
.draft-selector-container,
.draft-selector-bubble,
.draft-selector-current,
.draft-selector-dropdown {
  /* Remove all old styles */
}

/* Results History Panel */
.results-history-panel {
  width: 300px;
  background: var(--bg-secondary);
  border-right: 1px solid var(--border-color);
  display: flex;
  flex-direction: column;
  transition: all var(--transition-base);
}

.results-history-panel:not(.visible) {
  width: 0;
  padding: 0;
  border-right: none;
}

.history-header {
  display: flex;
  justify-content: space-between;
  padding: var(--spacing-lg);
  border-bottom: 1px solid var(--border-color);
}

.history-header h3,
.history-header h4 {
  margin: 0;
  color: var(--text-primary);
  font-size: 1rem;
  font-weight: 600;
}

.toggle-history {
  background: none;
  border: none;
  color: var(--text-secondary);
  font-size: 1rem;
  cursor: pointer;
  padding: 0.25rem;
  transition: color var(--transition-base);
}

.toggle-history:hover {
  color: var(--text-primary);
}

/* History Items */
.history-list {
  max-height: 300px;
  overflow-y: auto;
  padding: 8px;
}

.history-item {
  padding: 0.75rem;
  margin-bottom: 0.5rem;
  background-color: var(--bg-primary);
  border: 1px solid var(--border-color);
  cursor: pointer;
  transition: all var(--transition-base);
}

.history-item:hover {
  border-color: var(--accent-primary);
}

.history-item.selected {
  background-color: var(--accent-primary);
  color: var(--bg-primary);
  border-color: var(--accent-primary);
}

.result-info {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 0.25rem;
}

.result-name {
  font-size: 0.9rem;
  font-weight: 500;
}

/* Status Badges */
.status-badge {
  font-size: 0.7rem;
  font-weight: 600;
  padding: 0.25rem 0.5rem;
  border-radius: 12px;
  text-transform: uppercase;
}

.status-badge.completed {
  background-color: var(--status-success);
  color: var(--bg-primary);
}

.status-badge.error {
  background-color: var(--status-error);
  color: var(--bg-primary);
}

.status-badge.processing {
  background-color: var(--status-warning);
  color: var(--bg-primary);
}

/* Result Tabs */
.result-tabs {
  display: flex;
  gap: 0.25rem;
  border-bottom: 1px solid var(--border-color);
}

.result-tabs .tab {
  padding: 0.75rem 1.5rem;
  background: none;
  border: none;
  color: var(--text-secondary);
  font-weight: 500;
  cursor: pointer;
  border-bottom: 2px solid transparent;
  transition: all var(--transition-base);
}

.result-tabs .tab.active {
  color: var(--accent-primary);
  border-bottom-color: var(--accent-primary);
}

.result-tabs .tab:hover:not(.active) {
  color: var(--text-primary);
}

/* Dark theme adjustments */
@media (prefers-color-scheme: dark) {
  .draft-selector-bubble {
    background: rgba(0, 0, 0, 0.4);
    border-color: rgba(255, 255, 255, 0.08);
  }
  
  .draft-selector-bubble:hover {
    background: rgba(0, 0, 0, 0.5);
    border-color: rgba(255, 255, 255, 0.12);
  }
  
  .draft-selector-bubble.expanded {
    background: rgba(0, 0, 0, 0.6);
    border-color: rgba(255, 255, 255, 0.15);
  }
  
  .draft-selector-dropdown {
    background: rgba(0, 0, 0, 0.7);
    border-color: rgba(255, 255, 255, 0.1);
  }
}

/*
üî¥ HEATMAP FEATURE STYLING - POSITIONED ACCORDING TO DOCUMENTATION üî¥
====================================================================
*/

/* Heatmap Toggle - Positioned at right: 80px (40px offset from DraftSelector) */
.heatmap-toggle-container {
  position: absolute;
  top: 60px;          /* ‚Üê CRITICAL: Must align with draft selector */
  right: 80px;        /* ‚Üê CRITICAL: 40px offset from draft selector (40px + 40px spacing) */
  z-index: 10;        /* ‚Üê CRITICAL: Same layer as draft selector */
}

/* üÜï NEW: Alignment Toggle - Positioned next to Heatmap Toggle */
.alignment-toggle-container {
  position: absolute;
  top: 60px;          /* ‚Üê CRITICAL: Must align with draft selector and heatmap toggle */
  right: 120px;       /* ‚Üê CRITICAL: 40px offset from heatmap toggle (80px + 40px spacing) */
  z-index: 10;        /* ‚Üê CRITICAL: Same layer as other controls */
}

.heatmap-toggle-button,
.alignment-toggle-button {
  background: var(--bg-secondary);
  color: var(--text-secondary);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  width: 28px;        /* ‚Üê CRITICAL: Must match draft selector bubble size */
  height: 28px;       /* ‚Üê CRITICAL: Must match draft selector bubble size */
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.8rem;
  transition: all 0.3s ease;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
}

.heatmap-toggle-button:hover,
.alignment-toggle-button:hover {
  background: rgba(var(--accent-primary-rgb), 0.1);
  color: var(--accent-primary);
  border-color: var(--accent-primary);
  transform: scale(1.05);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

.heatmap-toggle-button.enabled {
  background: var(--accent-primary);  /* ‚Üê CRITICAL: Must match draft selector active color */
  color: white;
  border-color: var(--accent-primary);
}

.heatmap-toggle-button.enabled:hover {
  background: rgba(var(--accent-primary-rgb), 0.8);
  transform: scale(1.05);
}

/* üÜï NEW: Alignment Toggle Active States */
.alignment-toggle-button.enabled {
  background: #10b981;  /* Emerald green for alignment system */
  color: white;
  border-color: #10b981;
}

.alignment-toggle-button.enabled:hover {
  background: rgba(16, 185, 129, 0.8);
  transform: scale(1.05);
}

/* Disabled states for both toggles */
.heatmap-toggle-button.single-draft,
.alignment-toggle-button.single-draft {
  background-color: var(--bg-tertiary) !important;
  color: var(--text-secondary) !important;
  cursor: not-allowed !important;
}

.heatmap-toggle-button.single-draft:hover,
.alignment-toggle-button.single-draft:hover {
  background-color: var(--bg-tertiary) !important;
  transform: none !important;
}

/* Confidence Heatmap Viewer */
.confidence-heatmap-viewer {
  font-family: 'Courier New', monospace;
  line-height: 1.6;
  padding: 16px;
  background: var(--bg-primary);
  border-radius: 6px;
  position: relative;
}

.heatmap-text-container {
  white-space: pre-wrap;
  word-wrap: break-word;
}

/* Confidence Word Styling */
.confidence-word {
  display: inline;
  padding: 1px 2px;
  border-radius: 2px;
  transition: all 0.2s ease;
  position: relative;
}

.confidence-word.clickable {
  cursor: pointer;
  border: 1px solid transparent;
}

.confidence-word.clickable:hover {
  border-color: var(--accent-primary);
  box-shadow: 0 0 0 1px var(--accent-primary);
}

.confidence-word.editable {
  cursor: text;
  border: 1px dashed var(--accent-primary);
  background-color: rgba(var(--accent-primary-rgb), 0.1) !important;
}

.confidence-word.editable:hover {
  background-color: rgba(var(--accent-primary-rgb), 0.2) !important;
}

/* Human-confirmed words - distinct green shade */
.confidence-word.human-confirmed {
  background-color: rgba(16, 185, 129, 0.25) !important; /* Emerald green for human input */
  border: 1px solid rgba(16, 185, 129, 0.4);
}

.confidence-word.human-confirmed:hover {
  background-color: rgba(16, 185, 129, 0.35) !important;
}

/* Word Edit Input */
.word-edit-input {
  background: var(--bg-secondary);
  border: 2px solid var(--accent-primary);
  border-radius: 3px;
  padding: 2px 4px;
  font-family: inherit;
  font-size: inherit;
  color: var(--text-primary);
  outline: none;
  min-width: 60px;
}

/* Confidence Popup - Sleeker horizontal design */
.confidence-popup {
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: 8px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
  padding: 8px 12px;
  min-width: 150px;
  max-width: 400px;
  z-index: 1000;
  font-size: 0.8rem;
}

.popup-content {
  display: flex;
  align-items: center;
  gap: 8px;
}

.popup-word-info {
  display: flex;
  align-items: center;
  gap: 4px;
  margin-right: 8px;
}

.popup-word {
  font-weight: 600;
  color: var(--text-primary);
  font-size: 0.85rem;
}

.popup-confidence {
  font-size: 0.7rem;
  color: var(--text-secondary);
  background: var(--bg-tertiary);
  padding: 1px 4px;
  border-radius: 6px;
}

.popup-alternatives {
  display: flex;
  align-items: center;
  gap: 4px;
  max-width: 200px;
  overflow-x: auto;
  scrollbar-width: thin;
  scrollbar-color: var(--border-color) transparent;
}

.popup-alternatives::-webkit-scrollbar {
  height: 3px;
}

.popup-alternatives::-webkit-scrollbar-track {
  background: transparent;
}

.popup-alternatives::-webkit-scrollbar-thumb {
  background: var(--border-color);
  border-radius: 2px;
}

.alternative-option {
  background: var(--bg-tertiary);
  border: 1px solid var(--border-color);
  padding: 3px 6px;
  border-radius: 4px;
  cursor: pointer;
  transition: all 0.2s ease;
  white-space: nowrap;
  font-size: 0.75rem;
  color: var(--text-primary);
  font-weight: 500;
}

.alternative-option:hover {
  background: var(--accent-primary);
  color: white;
  border-color: var(--accent-primary);
}

.unlock-button {
  background: none;
  border: 1px solid var(--border-color);
  padding: 4px 6px;
  border-radius: 4px;
  cursor: pointer;
  font-size: 0.7rem;
  color: var(--text-secondary);
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  gap: 2px;
}

.unlock-button:hover {
  background: var(--bg-tertiary);
  color: var(--text-primary);
}

/* Enhanced Results Viewer Styles */

/* Results List Enhancements */
.results-viewer {
  width: 100%;
  max-width: 1200px;
  margin: 0 auto;
  padding: 1rem;
}

.results-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1.5rem;
  padding-bottom: 1rem;
  border-bottom: 1px solid var(--border-color);
}

.results-header h2 {
  margin: 0;
  color: var(--text-primary);
  font-size: 1.5rem;
}

.results-summary {
  display: flex;
  gap: 1rem;
  align-items: center;
}

.success-count {
  color: rgb(34, 197, 94);
  font-weight: 600;
}

.error-count {
  color: rgb(239, 68, 68);
  font-weight: 600;
}

.results-list {
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

.result-item {
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: 8px;
  padding: 1rem;
  transition: all 0.2s ease;
}

.result-item:hover {
  border-color: var(--accent-primary);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

.result-item.error {
  border-color: rgba(239, 68, 68, 0.3);
  background: rgba(239, 68, 68, 0.02);
}

.result-item.completed {
  border-color: rgba(34, 197, 94, 0.3);
}

.result-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;
}

.result-info {
  display: flex;
  align-items: center;
  gap: 0.75rem;
}

.result-info h4 {
  margin: 0;
  color: var(--text-primary);
  font-size: 1rem;
}

.format-badge {
  padding: 2px 6px;
  border-radius: 10px;
  font-size: 0.65rem;
  font-weight: 600;
  text-transform: uppercase;
}

.format-badge.json {
  background: rgba(147, 51, 234, 0.1);
  color: rgb(147, 51, 234);
}

.view-button {
  background: var(--accent-primary);
  color: white;
  border: none;
  padding: 0.5rem 1rem;
  border-radius: 6px;
  cursor: pointer;
  font-size: 0.875rem;
  transition: all 0.2s ease;
}

.view-button:hover {
  background: rgba(var(--accent-primary-rgb), 0.8);
  transform: translateY(-1px);
}

.error-message {
  background: rgba(239, 68, 68, 0.1);
  border: 1px solid rgba(239, 68, 68, 0.3);
  border-radius: 6px;
  padding: 0.75rem;
  margin-top: 0.5rem;
}

.error-message p {
  margin: 0;
  color: rgb(239, 68, 68);
  font-size: 0.875rem;
}

.result-preview {
  margin-top: 1rem;
}

.text-preview {
  background: var(--bg-tertiary);
  border-radius: 6px;
  padding: 1rem;
  margin-bottom: 0.75rem;
}

.text-preview p {
  margin: 0;
  color: var(--text-secondary);
  font-size: 0.875rem;
  line-height: 1.5;
}

.result-stats {
  display: flex;
  gap: 1rem;
  font-size: 0.8rem;
  color: var(--text-secondary);
}

.result-stats span {
  display: flex;
  align-items: center;
  gap: 0.25rem;
}

/* Modal Enhancements */
.modal-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  padding: 2rem;
}

.modal-content {
  background: var(--bg-primary);
  border-radius: 12px;
  width: 100%;
  max-width: 900px;
  max-height: 90vh;
  display: flex;
  flex-direction: column;
  box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
}

.modal-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1.5rem;
  border-bottom: 1px solid var(--border-color);
  background: var(--bg-secondary);
  border-radius: 12px 12px 0 0;
}

.modal-header h3 {
  margin: 0;
  color: var(--text-primary);
  font-size: 1.25rem;
}

.view-mode-toggle {
  display: flex;
  gap: 0.5rem;
  background: var(--bg-tertiary);
  padding: 4px;
  border-radius: 8px;
}

.view-mode-toggle button {
  background: none;
  border: none;
  padding: 0.5rem 0.75rem;
  border-radius: 6px;
  cursor: pointer;
  font-size: 0.875rem;
  color: var(--text-secondary);
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.view-mode-toggle button:hover {
  background: var(--bg-primary);
  color: var(--text-primary);
}

.view-mode-toggle button.active {
  background: var(--accent-primary);
  color: white;
}

.close-button {
  background: none;
  border: none;
  color: var(--text-secondary);
  cursor: pointer;
  font-size: 1.5rem;
  padding: 0.25rem;
  border-radius: 6px;
  transition: all 0.2s ease;
  width: 32px;
  height: 32px;
  display: flex;
  align-items: center;
  justify-content: center;
}

.close-button:hover {
  background: rgba(239, 68, 68, 0.1);
  color: rgb(239, 68, 68);
}

.modal-body {
  flex: 1;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

/* Text View Enhancements */
.text-view {
  display: flex;
  flex-direction: column;
  height: 100%;
}

.text-actions {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 1rem 1.5rem;
  border-bottom: 1px solid var(--border-color);
  background: var(--bg-secondary);
}

.text-actions button {
  background: var(--accent-primary);
  color: white;
  border: none;
  padding: 0.5rem 1rem;
  border-radius: 6px;
  cursor: pointer;
  font-size: 0.875rem;
  transition: all 0.2s ease;
}

.text-actions button:hover {
  background: rgba(var(--accent-primary-rgb), 0.8);
}

.format-info {
  color: var(--text-secondary);
  font-size: 0.8rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.formatted-text {
  flex: 1;
  overflow-y: auto;
  padding: 1.5rem;
  line-height: 1.6;
}

.text-line {
  margin: 0 0 1rem 0;
  color: var(--text-primary);
  font-size: 0.95rem;
}

.section-divider {
  border: none;
  height: 1px;
  background: var(--border-color);
  margin: 1.5rem 0;
}

.line-break {
  height: 1rem;
}

/* JSON View Enhancements */
.json-view {
  display: flex;
  flex-direction: column;
  height: 100%;
}

.json-actions {
  display: flex;
  gap: 0.5rem;
  padding: 1rem 1.5rem;
  border-bottom: 1px solid var(--border-color);
  background: var(--bg-secondary);
}

.json-actions button {
  background: var(--accent-primary);
  color: white;
  border: none;
  padding: 0.5rem 1rem;
  border-radius: 6px;
  cursor: pointer;
  font-size: 0.875rem;
  transition: all 0.2s ease;
}

.json-actions button:hover {
  background: rgba(var(--accent-primary-rgb), 0.8);
}

.json-content {
  flex: 1;
  overflow-y: auto;
  padding: 1.5rem;
  background: var(--bg-tertiary);
  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
  font-size: 0.875rem;
  line-height: 1.5;
  color: var(--text-primary);
  margin: 0;
  border-radius: 0 0 12px 12px;
}

/* Metadata View Enhancements */
.metadata-view {
  display: flex;
  flex-direction: column;
  height: 100%;
}

.metadata-actions {
  padding: 1rem 1.5rem;
  border-bottom: 1px solid var(--border-color);
  background: var(--bg-secondary);
}

.metadata-actions button {
  background: var(--accent-primary);
  color: white;
  border: none;
  padding: 0.5rem 1rem;
  border-radius: 6px;
  cursor: pointer;
  font-size: 0.875rem;
  transition: all 0.2s ease;
}

.metadata-actions button:hover {
  background: rgba(var(--accent-primary-rgb), 0.8);
}

.metadata-grid {
  padding: 1.5rem;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1rem;
}

.metadata-item {
  background: var(--bg-secondary);
  padding: 1rem;
  border-radius: 8px;
  border: 1px solid var(--border-color);
}

.metadata-key {
  display: block;
  font-weight: 600;
  color: var(--text-secondary);
  font-size: 0.8rem;
  margin-bottom: 0.5rem;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.metadata-value {
  display: block;
  color: var(--text-primary);
  font-size: 1rem;
  font-weight: 500;
}

.raw-metadata {
  flex: 1;
  padding: 0 1.5rem 1.5rem 1.5rem;
  overflow-y: auto;
}

.raw-metadata h4 {
  margin: 0 0 1rem 0;
  color: var(--text-primary);
  font-size: 1rem;
}

.metadata-json {
  background: var(--bg-tertiary);
  border: 1px solid var(--border-color);
  border-radius: 8px;
  padding: 1rem;
  font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
  font-size: 0.8rem;
  line-height: 1.4;
  color: var(--text-primary);
  margin: 0;
  overflow-x: auto;
}

/* Responsive Design */
@media (max-width: 768px) {
  .modal-overlay {
    padding: 1rem;
  }
  
  .modal-content {
    max-height: 95vh;
  }
  
  .modal-header {
    padding: 1rem;
    flex-direction: column;
    gap: 1rem;
    align-items: stretch;
  }
  
  .view-mode-toggle {
    justify-content: center;
  }
  
  .metadata-grid {
    grid-template-columns: 1fr;
  }
  
  .text-actions,
  .json-actions,
  .metadata-actions {
    flex-direction: column;
    gap: 0.5rem;
  }
}

/* Heatmap Toggle - CRITICAL POSITIONING */
.heatmap-toggle-container {
  position: absolute;
  top: 60px;          /* ‚Üê CRITICAL: Must align with draft selector */
  right: 80px;        /* ‚Üê CRITICAL: 40px offset from draft selector (40px + 40px spacing) */
  z-index: 10;        /* ‚Üê CRITICAL: Same layer as draft selector */
}

.heatmap-toggle-button {
  background: var(--bg-secondary);
  color: var(--text-secondary);
  border: 1px solid var(--border-color);
  border-radius: 6px;
  width: 28px;        /* ‚Üê CRITICAL: Must match draft selector bubble size */
  height: 28px;       /* ‚Üê CRITICAL: Must match draft selector bubble size */
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 0.8rem;
  transition: all 0.3s ease;
  box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
}

.heatmap-toggle-button:hover {
  background: rgba(var(--accent-primary-rgb), 0.1);
  color: var(--accent-primary);
  border-color: var(--accent-primary);
  transform: scale(1.05);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
}

.heatmap-toggle-button.enabled {
  background: var(--accent-primary);  /* ‚Üê CRITICAL: Must match draft selector active color */
  color: white;
  border-color: var(--accent-primary);
}

.heatmap-toggle-button.enabled:hover {
  background: rgba(var(--accent-primary-rgb), 0.8);
  transform: scale(1.05);
}

/* Confidence Heatmap Viewer */
.confidence-heatmap-viewer {
  position: relative;
  width: 100%;
  height: 100%;
  overflow-y: auto;
  padding: 1rem;
  background: var(--bg-primary);
}

.heatmap-text-container {
  line-height: 1.8;
  font-size: 1rem;
  color: var(--text-primary);
  font-family: inherit;
}

.confidence-word {
  display: inline;
  padding: 2px 1px;
  margin: 0 1px;
  border-radius: 2px;
  transition: all 0.2s ease;
  position: relative;
}

.confidence-word.clickable {
  cursor: pointer;
}

.confidence-word.clickable:hover {
  transform: translateY(-1px);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.confidence-word.editable {
  background: rgba(59, 130, 246, 0.1);
  border: 1px solid rgba(59, 130, 246, 0.3);
}

.confidence-word.editable:hover {
  background: rgba(59, 130, 246, 0.2);
  border-color: rgba(59, 130, 246, 0.5);
}

.confidence-word.human-confirmed {
  background: rgba(34, 197, 94, 0.1);
  border: 1px solid rgba(34, 197, 94, 0.3);
}

.confidence-word.human-confirmed:hover {
  background: rgba(34, 197, 94, 0.2);
  border-color: rgba(34, 197, 94, 0.5);
}

.word-edit-input {
  display: inline-block;
  background: var(--bg-secondary);
  border: 2px solid var(--accent-primary);
  border-radius: 4px;
  padding: 2px 4px;
  font-size: inherit;
  font-family: inherit;
  color: var(--text-primary);
  min-width: 60px;
  outline: none;
}

/* Confidence Popup */
.confidence-popup {
  position: absolute;
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: 8px;
  padding: 12px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
  z-index: 1000;
  min-width: 200px;
  max-width: 300px;
}

.popup-content {
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.popup-word-info {
  border-bottom: 1px solid var(--border-color);
  padding-bottom: 8px;
  margin-bottom: 8px;
}

.popup-word {
  font-weight: 600;
  color: var(--text-primary);
  font-size: 1rem;
}

.popup-confidence {
  font-size: 0.85rem;
  color: var(--text-secondary);
  margin-top: 4px;
}

.popup-alternatives {
  max-height: 120px;
  overflow-y: auto;
  border: 1px solid var(--border-color);
  border-radius: 4px;
  background: var(--bg-tertiary);
}

.popup-alternatives::-webkit-scrollbar {
  width: 6px;
}

.popup-alternatives::-webkit-scrollbar-track {
  background: var(--bg-tertiary);
}

.popup-alternatives::-webkit-scrollbar-thumb {
  background: var(--border-color);
  border-radius: 3px;
}

.alternative-option {
  padding: 6px 8px;
  cursor: pointer;
  font-size: 0.85rem;
  color: var(--text-primary);
  border-bottom: 1px solid rgba(var(--border-color-rgb), 0.5);
  transition: background-color 0.2s ease;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.alternative-option:last-child {
  border-bottom: none;
}

.alternative-option:hover {
  background: var(--bg-primary);
}

.unlock-button {
  background: var(--accent-primary);
  color: white;
  border: none;
  padding: 6px 12px;
  border-radius: 4px;
  cursor: pointer;
  font-size: 0.8rem;
  font-weight: 500;
  transition: all 0.2s ease;
  display: flex;
  align-items: center;
  gap: 4px;
  margin-top: 8px;
  width: 100%;
  justify-content: center;
}

.unlock-button:hover {
  background: rgba(var(--accent-primary-rgb), 0.8);
  transform: translateY(-1px);
}

/* üÜï NEW: Alignment Heatmap Viewer */
.alignment-heatmap-viewer {
  position: relative;
  width: 100%;
  height: 100%;
  overflow-y: auto;
  padding: 1rem;
  background: var(--bg-primary);
  font-family: inherit;
}

.alignment-text-container {
  line-height: 1.8;
  font-size: 1rem;
  color: var(--text-primary);
  margin-bottom: 1rem;
}

.alignment-word {
  display: inline;
  padding: 2px 1px;
  margin: 0 1px;
  border-radius: 2px;
  transition: all 0.2s ease;
  position: relative;
}

.alignment-word.has-alternatives {
  cursor: pointer;
  border: 1px solid transparent;
}

.alignment-word.has-alternatives:hover {
  transform: translateY(-1px);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  border-color: rgba(16, 185, 129, 0.3);
}

.alignment-word.confirmed {
  font-weight: 600;
  border-radius: 3px;
}

/* Alignment info bar */
.alignment-info-bar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.5rem 1rem;
  background: var(--bg-secondary);
  border-radius: 4px;
  margin-top: 1rem;
  font-size: 0.8rem;
  color: var(--text-secondary);
}

.primary-engine {
  font-weight: 600;
  color: #10b981;
}

.engines-count {
  background: var(--bg-tertiary);
  padding: 2px 6px;
  border-radius: 10px;
  font-size: 0.7rem;
}

/* Alignment popup styles */
.alignment-popup {
  background: var(--bg-secondary);
  border: 1px solid var(--border-color);
  border-radius: 8px;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
  min-width: 200px;
  max-width: 300px;
  z-index: 1000;
}

.alignment-popup .popup-content {
  padding: 0;
}

.alignment-popup .popup-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 16px;
  border-bottom: 1px solid var(--border-color);
  background: var(--bg-tertiary);
  border-radius: 8px 8px 0 0;
}

.alignment-popup .popup-word {
  font-weight: 600;
  color: var(--text-primary);
  font-size: 0.9rem;
}

.alignment-popup .popup-confidence {
  background: #10b981;
  color: white;
  padding: 2px 6px;
  border-radius: 10px;
  font-size: 0.7rem;
  font-weight: 600;
}

.alignment-popup .popup-engine {
  font-size: 0.7rem;
  color: var(--text-secondary);
  font-style: italic;
}

.alignment-popup .popup-alternatives {
  padding: 8px;
}

.alignment-popup .alternative-label {
  font-size: 0.75rem;
  color: var(--text-secondary);
  margin-bottom: 6px;
  text-transform: uppercase;
  letter-spacing: 0.5px;
}

.alignment-popup .alternative-option {
  display: block;
  width: 100%;
  background: none;
  border: 1px solid var(--border-color);
  border-radius: 4px;
  padding: 6px 10px;
  margin-bottom: 4px;
  cursor: pointer;
  text-align: left;
  font-size: 0.8rem;
  color: var(--text-primary);
  transition: all 0.2s ease;
}

.alignment-popup .alternative-option:hover {
  background: rgba(16, 185, 129, 0.1);
  border-color: #10b981;
  color: #10b981;
}

.alignment-popup .alternative-option.current {
  background: rgba(16, 185, 129, 0.1);
  border-color: #10b981;
  color: #10b981;
  font-weight: 600;
}

.alignment-popup .alternative-option.current:hover {
  background: rgba(16, 185, 129, 0.2);
} 

/* Edit Toggle Section */
.edit-toggle-section {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  margin: 0.5rem 0;
  padding: 0.5rem;
  border-radius: 6px;
  background: rgba(59, 130, 246, 0.1);
  border: 1px solid rgba(59, 130, 246, 0.2);
}

.edit-toggle-button {
  background: rgba(59, 130, 246, 0.9);
  color: white;
  border: none;
  padding: 0.4rem 0.8rem;
  border-radius: 4px;
  cursor: pointer;
  font-size: 0.9rem;
  font-weight: 500;
  transition: all 0.2s ease;
}

.edit-toggle-button:hover {
  background: rgba(59, 130, 246, 1);
  transform: translateY(-1px);
}

.edit-controls {
  display: flex;
  gap: 0.25rem;
  margin-left: auto;
}

.edit-control-button {
  background: rgba(75, 85, 99, 0.6);
  color: white;
  border: none;
  padding: 0.3rem 0.5rem;
  border-radius: 3px;
  cursor: pointer;
  font-size: 0.8rem;
  font-weight: 500;
  transition: all 0.2s ease;
  min-width: 1.8rem;
}

.edit-control-button:hover:not(:disabled) {
  background: rgba(75, 85, 99, 0.8);
  transform: translateY(-1px);
}

.edit-control-button:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}

.edit-control-button.reset {
  background: rgba(239, 68, 68, 0.6);
}

.edit-control-button.reset:hover:not(:disabled) {
  background: rgba(239, 68, 68, 0.8);
}

/* Text Content Wrapper */
.text-content-wrapper {
  height: 100%;
  display: flex;
  flex-direction: column;
}

.edited-text-indicator {
  background: rgba(59, 130, 246, 0.1);
  border: 1px solid rgba(59, 130, 246, 0.3);
  color: rgba(59, 130, 246, 0.9);
  padding: 0.5rem;
  border-radius: 4px;
  font-size: 0.9rem;
  font-weight: 500;
  margin-bottom: 0.5rem;
  text-align: center;
}

.text-content {
  flex: 1;
  overflow-y: auto;
} 

/* NEW: Normalized Sections Tab Styling */
.normalized-sections-display {
  height: 100%;
  display: flex;
  flex-direction: column;
  padding: 1rem;
  background-color: var(--color-bg-secondary);
}

.normalized-sections-header {
  margin-bottom: 1rem;
  padding-bottom: 0.5rem;
  border-bottom: 1px solid var(--color-border-light);
}

.normalized-sections-header h4 {
  margin: 0 0 0.5rem 0;
  color: var(--color-text-primary);
  font-size: 1.1rem;
  font-weight: 600;
}

.normalized-sections-header p {
  margin: 0;
  color: var(--color-text-secondary);
  font-size: 0.9rem;
  line-height: 1.4;
}

.normalized-sections-content {
  flex: 1;
  overflow: hidden;
  border: 1px solid var(--color-border-light);
  border-radius: 6px;
  background-color: var(--color-bg-primary);
}

.normalized-sections-text {
  height: 100%;
  overflow-y: auto;
  padding: 1rem;
  margin: 0;
  font-family: 'SF Mono', Monaco, 'Cascadia Code', 'Roboto Mono', Consolas, 'Courier New', monospace;
  font-size: 0.875rem;
  line-height: 1.5;
  color: var(--color-text-primary);
  background-color: transparent;
  white-space: pre-wrap;
  word-break: break-word;
}

.normalized-sections-text::-webkit-scrollbar {
  width: 8px;
}

.normalized-sections-text::-webkit-scrollbar-track {
  background: var(--color-bg-secondary);
  border-radius: 4px;
}

.normalized-sections-text::-webkit-scrollbar-thumb {
  background: var(--color-border-light);
  border-radius: 4px;
}

.normalized-sections-text::-webkit-scrollbar-thumb:hover {
  background: var(--color-text-secondary);
} 