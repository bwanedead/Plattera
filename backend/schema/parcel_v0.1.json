{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "title": "PlatteraParcel",
    "type": "object",
    "required": ["parcel_id", "crs", "origin", "legs", "close", "stated_area_ac", "source"],
    "properties": {
      "parcel_id": { 
        "type": "string", 
        "description": "Unique id you assign (slug, UUID, etc.)" 
      },
  
      "crs": {
        "type": "string",
        "description": "Coordinate reference system for the origin",
        "enum": ["LOCAL", "EPSG:4326", "UTM", "PLSS"]
      },
  
      "origin": {
        "type": "object",
        "description": "Starting point for all legs",
        "required": ["type", "lat", "lon", "zone", "easting_m", "northing_m", "t", "r", "section", "corner", "offset_m", "offset_bearing_deg", "note"],
        "properties": {
          "type": {
            "type": "string",
            "enum": ["latlon", "utm", "plss", "local"]
          },
          "lat":  { "type": ["number", "null"] },
          "lon":  { "type": ["number", "null"] },
          "zone": { "type": ["integer", "null"], "minimum": 1, "maximum": 60 },
          "easting_m":  { "type": ["number", "null"] },
          "northing_m": { "type": ["number", "null"] },
          "t":       { "type": ["integer", "null"], "description": "Township number" },
          "r":       { "type": ["integer", "null"], "description": "Range number" },
          "section": { "type": ["integer", "null"], "minimum": 1, "maximum": 36 },
          "corner":  { "type": ["string", "null"], "enum": ["NW","NE","SW","SE", null] },
          "offset_m":           { "type": ["number", "null"] },
          "offset_bearing_deg": { "type": ["number", "null"], "minimum": 0, "maximum": 360 },
          "note": { "type": ["string", "null"] }
        },
        "additionalProperties": false
      },
  
      "legs": {
        "type": "array",
        "minItems": 1,
        "items": {
          "type": "object",
          "required": ["bearing_deg", "distance", "distance_units", "distance_sigma", "raw_text", "confidence"],
          "properties": {
            "bearing_deg":  { "type": "number", "minimum": 0, "maximum": 360 },
            "distance":     { "type": "number", "exclusiveMinimum": 0, "description": "Distance value as stated in legal description" },
            "distance_units": { 
              "type": "string", 
              "enum": ["feet", "meters", "yards", "chains", "rods", "miles", "kilometers"],
              "description": "Unit of measurement for the distance"
            },
            "distance_sigma": { "type": ["number", "null"], "minimum": 0, "description": "Uncertainty in distance measurement" },
            "raw_text":     { "type": "string" },
            "confidence":   { "type": "number", "minimum": 0, "maximum": 1 }
          },
          "additionalProperties": false
        }
      },
  
      "close": { "type": "boolean" },
  
      "stated_area_ac": { "type": ["number", "null"], "minimum": 0 },
  
      "source": { "type": ["string", "null"] }
    },
    "additionalProperties": false
  }



  